<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alexitoâs World - Poor man's hot reloading for Swift scripts</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Bree+Serif&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#242424;
    --bg-2:#2b2b2b;
    --bg-3:#1c1c1c;
    --bg-4:#111;
    --text:#e7e7e7;
    --muted:#a6a6a6;
    --muted-2:#8a8a8a;
    --shadow:rgba(0,0,0,.35);
    --accent:#f39a35;
    --accent-2:#ff8e1c;
    --chip:#0f0f0f;
    --chip-border:#3b3b3b;
    --card:#2c2c2c;
    --card-2:#333;
    --code:#cda7ff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:var(--bg);
    color:var(--text);
    font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    line-height:1.6;
  }

  /* Header */
  .site-header{
    padding:36px 20px 22px;
    text-align:center;
    background:#1f1f1f;
    box-shadow:0 1px 0 rgba(255,255,255,.04) inset;
  }
  .brand{
    font-family:"Bree Serif", serif;
    font-size:42px;
    color:#fafafa;
    letter-spacing:.5px;
  }
  .subtitle{
    margin-top:6px;
    color:#d3d3d3;
    font-weight:500;
    font-size:15px;
    opacity:.9;
  }
  .subtitle em{font-style:italic}
  .site-nav{
    margin-top:12px;
    color:#d9d9d9;
    display:flex;
    justify-content:center;
    gap:22px;
    font-weight:600;
  }
  .site-nav a{
    color:#e8e8e8;
    text-decoration:none;
    opacity:.85;
  }
  .site-nav .sep{opacity:.35}

  /* Main content container */
  .container{
    max-width:760px;
    margin:26px auto 70px;
    padding:0 22px;
  }

  /* Meta row */
  .meta-row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    color:var(--muted);
    font-size:14px;
    margin-bottom:10px;
  }
  .read-time{
    display:inline-flex;
    align-items:center;
    gap:8px;
    color:#d9d9d9;
    background:#303030;
    padding:6px 10px;
    border-radius:999px;
    font-size:12px;
  }
  .read-time .dot{
    width:18px;height:18px;border-radius:50%;
    background:#1a1a1a;
    position:relative;
    box-shadow:0 0 0 2px #444 inset;
  }
  .read-time .dot:after{
    content:"";
    position:absolute;left:50%;top:50%;
    width:7px;height:7px;background:#bfbfbf;border-radius:50%;
    transform:translate(-50%,-50%);
  }
  .rule{
    height:3px;background:var(--accent);
    width:100%;border-radius:2px;opacity:.9;margin:14px 0 18px;
  }

  /* Tags chips above title */
  .chips{display:flex;gap:10px;margin-bottom:12px;flex-wrap:wrap}
  .chip{
    background:var(--chip);
    color:#d9d9d9;
    padding:6px 10px;
    font-size:12px;
    border-radius:8px;
    border:1px solid var(--chip-border);
  }

  /* Title and content */
  h1{
    font-size:40px;
    line-height:1.25;
    font-weight:700;
    margin:4px 0 18px;
    color:#f0f0f0;
  }
  p{color:#cfcfcf;margin:16px 0}
  a{color:var(--accent);text-decoration:none}
  code{
    font-family:"Source Code Pro", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    background:#101012;
    color:var(--code);
    padding:2px 6px;border-radius:6px;border:1px solid #363646;
    font-size:.95em;
  }
  pre{
    background:#1f1f21;
    color:#e9e9e9;
    padding:14px 16px;border-radius:8px;border:1px solid #34343f;
    font-family:"Source Code Pro", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    white-space:pre-wrap;
    line-height:1.45;
    margin:14px 0;
  }

  /* Share */
  .share{
    margin:24px 0 22px;
    color:var(--accent);
    font-weight:600;
  }

  /* Support card */
  .support{
    background:#1c1c1c;
    border:1px solid #3a3a3a;
    border-radius:14px;
    padding:26px 22px;
    text-align:center;
    box-shadow:0 6px 14px var(--shadow);
  }
  .support p{color:#d5d5d5;margin:0 0 16px}
  .btn{
    display:inline-block;
    background:var(--accent-2);
    color:#fff;
    font-weight:700;
    padding:12px 22px;
    border-radius:24px;
    text-decoration:none;
    box-shadow:0 6px 0 rgba(0,0,0,.25) inset;
    font-family:"Bree Serif", serif;
  }

  .section-sep{
    height:3px;background:var(--accent);border-radius:3px;margin:26px 0 16px;
  }
  h2{
    margin:0 0 14px;
    font-size:26px;color:#e6e6e6;font-weight:700;
  }

  /* Cards grids */
  .grid-2{
    display:grid;
    grid-template-columns:1fr;
    gap:18px;
  }
  .grid-3{
    display:grid;
    grid-template-columns:1fr;
    gap:16px;
  }
  @media(min-width:820px){
    .grid-2{grid-template-columns:1fr 1fr}
    .grid-3{grid-template-columns:repeat(3,1fr)}
  }
  .card{
    background:#2f2f2f;
    border-radius:16px;
    padding:20px;
    border:1px solid #3a3a3a;
    color:#dadada;
  }
  .card .kicker{
    color:#bdbdbd;font-size:13px;margin-bottom:8px;opacity:.9
  }
  .card .kicker .tag{color:var(--accent);font-weight:700}
  .card h3{
    margin:4px 0 10px;
    font-size:20px;line-height:1.35;font-weight:700;
  }
  .card h3 a{color:var(--accent);text-decoration:none}
  .card .small{
    color:var(--muted);
    margin-top:26px;font-size:14px;
  }
  .card .side{
    display:flex;justify-content:space-between;color:#bababa
  }

  /* Article tag list */
  .tag-list{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px}
  .tag-list .chip{font-weight:600}

  /* Footer */
  .footer{
    margin-top:60px;
    border-top:3px solid var(--accent);
    padding:26px 20px 46px;
    text-align:center;
    color:#cfcfcf;
    background:#232323;
  }
  .footer a{color:#ffb35a;text-decoration:none}
  .footer .links{margin:10px 0}
  .footer small{color:#bdbdbd}
</style>
</head>
<body>
  <header class="site-header">
    <div class="brand">Alexitoâs World</div>
    <div class="subtitle">A world of coding ð», by <em>Alejandro Martinez</em></div>
    <div class="site-nav">
      <span class="sep">|</span>
      <a href="#">Swift</a>
      <a href="#">Development</a>
    </div>
  </header>

  <main class="container">
    <div class="meta-row">
      <div>June 5, 2016</div>
      <div class="read-time">
        <span class="dot"></span>
        <span>1 min read</span>
      </div>
    </div>
    <div class="rule"></div>

    <div class="chips">
      <span class="chip">Scripting</span>
      <span class="chip">Swift</span>
      <span class="chip">Tips and Tricks</span>
    </div>

    <h1>Poor man's hot reloading for Swift scripts</h1>

    <p>The other day, while I was writing a <a href="#">Swift script</a>, I added an option to make it run continuously so it could be on a server doing its job without stoping, for <em>eva</em>.</p>

    <p>To implement that I just used a <code>repeat</code> loop creating <code>NSTask</code>s that called the same script. <br>Scripts recursion.</p>

    <p>The funny part is that with this simple thing I found a quick way to writing the script, almost as a hot reloading tool.</p>

    <pre>let reload = "reload"
if Process.arguments.contains(reload) {
  repeat {
    let task = NSTask()
    task.launchPath = Process.arguments.first!
    task.arguments = Array(Process.arguments.suffixFrom(1).filter({$0 != reload}))
    task.launch()
    task.waitUntilExit()
  } while true
}

// Just drop this snippet at the top of the script, and when you call it with the <reload> argument
// it will start looping indefinitely.</pre>

    <p>Then you can just call it from the command line like:</p>

    <pre>main.swift reload other params</pre>

    <p>When that is done you can just modify the script and save the file, in the next execution your changes will be visible. If it fails to compile is not a big deal, the main script is still in memory without those changes so it will just loop and try to run it again.</p>

    <p>Obviously is not a big deal, is a bit annoying seeing all the console spammed, but I found it quite useful while I'm developing short scripts that I want to iterate on.</p>

    <p>Remember that you can use <a href="#">OS signals</a> to stop the task when the main script is killed.</p>

    <div class="share">Share this article on Twitter</div>

    <div class="support">
      <p>If you liked this article please consider supporting me</p>
      <a class="btn" href="#">Buy me a coffee</a>
    </div>

    <div class="section-sep"></div>
    <h2>Continue reading</h2>

    <div class="grid-2">
      <div class="card">
        <div class="kicker">Next article</div>
        <h3><a href="#">Using closures to simplify</a></h3>
        <div class="small">June 7, 2016</div>
      </div>
      <div class="card">
        <div class="side">
          <div class="kicker">Previous article</div>
          <div class="kicker"></div>
        </div>
        <h3><a href="#">Itâs a trap! Catch OS signals in Swift.</a></h3>
        <div class="small" style="text-align:right">May 29, 2016</div>
      </div>
    </div>

    <h2 style="margin-top:28px">Similar suggested articles</h2>
    <div class="grid-3">
      <div class="card">
        <div class="kicker">Based on tag <span class="tag">Swift</span></div>
        <h3><a href="#">Backport SwiftUI modifiers</a></h3>
        <div class="small">October 20, 2023</div>
      </div>
      <div class="card">
        <div class="kicker">Based on tag <span class="tag">Scripting</span></div>
        <h3><a href="#">Swift script to export lists from Reminders.app</a></h3>
        <div class="small">May 8, 2019</div>
      </div>
      <div class="card">
        <div class="kicker">Based on tag <span class="tag">Tips and Tricks</span></div>
        <h3><a href="#">Swift Collection's prefix for quick tests</a></h3>
        <div class="small">March 16, 2019</div>
      </div>
    </div>

    <h2 style="margin-top:26px">Or check out this article tags</h2>
    <div class="tag-list">
      <span class="chip">Scripting</span>
      <span class="chip">Swift</span>
      <span class="chip">Tips and Tricks</span>
    </div>
  </main>

  <footer class="footer">
    <div><a href="#">RSS</a></div>
    <div class="links">alexit04 | alexito4 | alexito4</div>
    <small>Generated using <a href="#">Publish</a></small>
  </footer>
</body>
</html>